---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: cache-image-ws-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 500Mi
---
apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  name: sample-git-chaincodebuild-pipelinerun
  labels:
    description: "A_PipelineRun_For_ChaincodeBuild"
spec:
  serviceAccountName: chaincodebuild-service-account
  pipelineRef:
    name: chaincodebuild
  params:
    - name: SOURCE
      value: git
    - name: SOURCE_GIT_URL
      value: https://github.com/bestchains/fabric-builder-k8s
    - name: APP_IMAGE
      value: bjwswang/chaincode-go
    - name: DOCKERFILE
      value: ./samples/go-contract/Dockerfile.optimized # relevant path to git repo's root directory
    - name: CONTEXT
      value: ./samples/go-contract # relevant path to git repo's root directory
  workspaces:
    - name: source-ws
      subPath: source
      persistentVolumeClaim:
        claimName: cache-image-ws-pvc
